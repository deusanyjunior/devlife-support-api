(this["webpackJsonpfrontend-dev"]=this["webpackJsonpfrontend-dev"]||[]).push([[0],{101:function(e){e.exports=JSON.parse('{"Username":"Username","Password":"Password","Type username":"Enter the username","username is a required field":"Required","password is a required field":"Required","Invalid credentials":"Wrong username or password","not-admin":"You don\'t have permission to access this page. Please log in with an authorized user."}')},102:function(e){e.exports=JSON.parse('{"Username":"Usu\xe1rio","Password":"Senha","Type username":"Digite o nome de usu\xe1rio","Student Dashboard":"Dashboard do Aluno","Instructor Dashboard":"Dashboard do Professor","Sign in":"Entrar","username is a required field":"Campo obrigat\xf3rio","password is a required field":"Campo obrigat\xf3rio","Invalid credentials":"Usu\xe1rio ou senha inv\xe1lidos","Logout":"Sair","not-admin":"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Por favor, entre com um usu\xe1rio autorizado."}')},108:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(92),c=n.n(s),i=n(19),o=(n(108),n(16)),l=n(7),u=n(2),d=n(55),j=n.n(d),b="devlife-user-data",h=function(e){e?localStorage.setItem(b,JSON.stringify(e)):localStorage.removeItem(b)},m=function(){var e=localStorage.getItem(b);return e?JSON.parse(e):null},p=n(1),O=Object(r.createContext)({user:null,putUser:function(){},removeUser:function(){}}),f=function(){var e=Object(r.useContext)(O);return{user:e.user,putUser:e.putUser,removeUser:e.removeUser}},x=function(e){var t=e.children,n=Object(r.useState)(m()),a=Object(l.a)(n,2),s=a[0],c=a[1],i=function(e){h(e),c(e)},o=function(){h(null),c(null)},u=Object(r.useMemo)((function(){return{user:s,putUser:i,removeUser:o}}),[s]);return Object(r.useEffect)((function(){if(!s){var e=m();e&&i(e)}}),[s]),Object(p.jsx)(O.Provider,{value:{user:u.user,putUser:u.putUser,removeUser:u.removeUser},children:t})},v=n(240),g=function(e){var t=e.children;return Object(p.jsx)("div",{className:"mx-4",children:t})},N=function(){var e=f().user,t=Object(u.h)();return e&&!e.isStaff?Object(p.jsx)(u.a,{to:{pathname:M.LOGIN,search:"?next=".concat(t.pathname,"&reason=not-admin")}}):null},y=function(e){var t=e.children,n=e.className;return Object(p.jsx)("h1",{className:"".concat(n||""," text-4xl leading-loose"),children:t})},S=function(e){var t=e.onClick,n=e.variant,r=e.children,a=e.type,s=e.disabled,c=e.className,i={primary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-primary hover:bg-primary-dark text-white",secondary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-secondary hover:bg-secondary-dark text-white",hidden:s?"bg-transparent text-gray-500 cursor-default":"bg-transparent"}[n];return Object(p.jsx)("button",{className:"".concat(c," ").concat(i," font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center"),onClick:t,type:a,disabled:s,children:r})};S.defaultProps={className:"",variant:"primary",type:"button"};var I=S,w=function(){var e=Object(v.a)().t,t=f(),n=t.user,r=t.removeUser;return Object(p.jsxs)(p.Fragment,{children:[!n&&Object(p.jsx)(i.b,{to:M.LOGIN,children:e("Login")}),!!n&&Object(p.jsx)(I,{variant:"hidden",onClick:r,children:e("Logout")})]})},T=function(){var e=Object(v.a)().t,t=f().user;return Object(p.jsx)("nav",{className:"py-2 px-4 bg-primary text-white",children:Object(p.jsxs)("ul",{className:"flex items-center",children:[Object(p.jsx)("li",{className:"uppercase font-bold",children:Object(p.jsx)(i.b,{to:"/",children:e("Developer Life")})}),ee.map((function(n){var r=$[n];if(r.permissionTest&&!r.permissionTest(t))return null;var a=r.title;return Object(p.jsx)("li",{className:"ml-4",children:Object(p.jsx)(i.b,{to:n,children:e(a)})},"nav__".concat(n))})),Object(p.jsx)("li",{className:"ml-auto",children:Object(p.jsx)(w,{})})]})})},C=function(){var e=Object(v.a)().t;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(N,{}),Object(p.jsx)(T,{}),Object(p.jsx)(g,{children:Object(p.jsx)(y,{children:e("Instructor Dashboard")})})]})},U=n(34),_=n(21),L=n(103),k=function(e){var t=e.htmlFor,n=e.children;return Object(p.jsx)("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-1",children:n})},D=function(e){var t=e.children;return Object(p.jsx)("p",{className:"text-red-500 text-xs italic",children:t})},E=["error","label","placeholder","inputId","name","type"],F=Object(r.forwardRef)((function(e,t){var n=e.error,r=e.label,a=e.placeholder,s=e.inputId,c=e.name,i=e.type,l=Object(U.a)(e,E);return Object(p.jsxs)("div",{className:"mb-4",children:[r&&Object(p.jsx)(k,{htmlFor:s,children:r}),Object(p.jsx)("input",Object(o.a)({className:"appearance-none border ".concat(n?"border-red-500":"border-gray-300"," rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),id:s,type:i,name:c,ref:t,placeholder:a||""},l)),n&&Object(p.jsx)(D,{children:n})]})}));F.defaultProps={type:"text"};var P=F,R=function(e){return Object(p.jsx)("form",Object(o.a)({},e))};R.Label=k,R.TextInput=P;var M,q=R,H=n(45),G=H.a().shape({username:H.b().required(),password:H.b().required()}),J=n(239),A=n(27),V=n.n(A),z={initial:{transition:{staggerChildren:.2}},animate:{transition:{staggerChildren:.2}}},B={initial:{y:"0%"},animate:{y:"100%"}},K={duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},Q=function(e){var t=e.light,n=e.className,r="".concat(V.a.loadingDot," ").concat(t?V.a.light:V.a.dark);return Object(p.jsx)("div",{className:"".concat(n||""," ").concat(V.a.animationContainer),children:Object(p.jsxs)(J.a.div,{className:V.a.dotContainer,variants:z,initial:"initial",animate:"animate",children:[Object(p.jsx)(J.a.span,{className:r,variants:B,transition:K}),Object(p.jsx)(J.a.span,{className:r,variants:B,transition:K}),Object(p.jsx)(J.a.span,{className:r,variants:B,transition:K})]})})},W=["onChange"],Y=["onChange"],X=function(){var e,t,n=Object(r.useRef)(!1);Object(r.useEffect)((function(){return function(){n.current=!0}}),[]);var a=Object(r.useState)(!1),s=Object(l.a)(a,2),c=s[0],i=s[1],d=Object(r.useState)(!1),b=Object(l.a)(d,2),h=b[0],m=b[1],O=Object(v.a)().t,x=f(),g=x.user,N=x.putUser,y=Object(u.g)(),S=new URLSearchParams(Object(u.h)().search),w=S.get("redirectTo");Object(r.useEffect)((function(){g&&w&&(w+="".concat(w.indexOf("?")>=0?";":"?","token=").concat(g.token),window.location.href=w)}),[g,w]);var T=Object(_.d)({resolver:Object(L.a)(G)}),C=T.register,k=T.handleSubmit,E=T.formState.errors,F=C("username"),P=F.onChange,R=Object(U.a)(F,W),M=C("password"),H=M.onChange,J=Object(U.a)(M,Y);return Object(p.jsx)("div",{className:"w-full min-h-screen px-2 flex flex-col justify-center",children:Object(p.jsxs)("div",{className:"max-w-xs mx-auto rounded shadow",children:[Object(p.jsx)("h1",{className:"text-3xl uppercase px-6 py-4 bg-primary text-white rounded-t text-center",children:O("Developer Life")}),Object(p.jsxs)(q,{className:"px-4 py-4",onSubmit:k((function(e){var t,r;m(!0),(t=e.username,r=e.password,j.a.post("/api/auth/login/",{username:t,password:r}).then((function(e){return e.data.key})).then((function(e){return j.a.get("/api/auth/user/",{headers:{Authorization:"Token ".concat(e)}}).then((function(e){return e.data})).then((function(t){return{pk:t.pk,username:t.username,email:t.email,firstName:t.first_name,lastName:t.last_name,isStaff:t.is_staff,token:e}})).catch((function(){return null}))})).catch((function(){return null}))).then((function(e){n.current||(e?(N(e),w||y.replace(S.get("next")||"/")):i(!0))})).finally((function(){return!n.current&&m(!1)}))})),children:[Object(p.jsx)(q.TextInput,Object(o.a)(Object(o.a)({label:O("Username"),inputId:"username",placeholder:O("Type username")},R),{},{onChange:function(e){i(!1),P(e)},error:O((null===E||void 0===E||null===(e=E.username)||void 0===e?void 0:e.message)||"")})),Object(p.jsx)(q.TextInput,Object(o.a)(Object(o.a)({label:O("Password"),inputId:"password",type:"password",placeholder:O("Password")},J),{},{onChange:function(e){i(!1),H(e)},error:O((null===E||void 0===E||null===(t=E.password)||void 0===t?void 0:t.message)||"")})),c&&Object(p.jsx)(D,{children:O("Invalid credentials")}),!!S.get("reason")&&Object(p.jsx)(D,{children:O(S.get("reason")||"")}),Object(p.jsx)(I,{className:"mt-2 w-full",type:"submit",disabled:h,children:O("Sign in")}),h&&Object(p.jsx)("div",{className:"w-full flex justify-center",children:Object(p.jsx)(Q,{className:"text-xs"})})]})]})})},Z=function(){var e=Object(v.a)().t,t=f().user;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T,{}),Object(p.jsxs)(g,{children:[Object(p.jsx)(y,{children:e("Student Dashboard")}),null===t||void 0===t?void 0:t.firstName," ",(null===t||void 0===t?void 0:t.isStaff)?"STAFF":"NOT STAFF"]})]})};!function(e){e.STUDENT_HOME="/",e.INSTRUCTOR_HOME="/instructor",e.LOGIN="/login"}(M||(M={}));var $={};$[M.STUDENT_HOME]={title:"Student Dashboard",props:{path:M.STUDENT_HOME,exact:!0,component:Z}},$[M.INSTRUCTOR_HOME]={title:"Instructor Dashboard",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:M.INSTRUCTOR_HOME,exact:!0,component:C}},$[M.LOGIN]={title:"Login",props:{path:M.LOGIN,exact:!0,component:X}};var ee=[M.STUDENT_HOME,M.INSTRUCTOR_HOME],te=function(){var e=f().user,t=Object(u.h)();return e||t.pathname===M.LOGIN?null:Object(p.jsx)(u.a,{to:{pathname:M.LOGIN,search:"?next=".concat(t.pathname)}})},ne=function(e){var t=e.children;return Object(p.jsx)(x,{children:t})},re=n(59),ae=n(35),se=n(101),ce=n(102);re.a.use(ae.e).init({resources:{en:{translation:se},pt:{translation:ce}},lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1}});re.a;var ie=function(){return Object(p.jsx)(ne,{children:Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(te,{}),Object(p.jsx)("div",{children:Object(p.jsx)(u.d,{children:Object.entries($).map((function(e,t){var n=Object(l.a)(e,2),r=(n[0],n[1].props);return Object(p.jsx)(u.b,Object(o.a)({},r),"route__".concat(t))}))})})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(ie,{})})}),document.getElementById("root")),oe()},27:function(e,t,n){e.exports={animationContainer:"LoadingIndicator_animationContainer__31NJQ",loadingDot:"LoadingIndicator_loadingDot__9elUF",dark:"LoadingIndicator_dark__VNh81",light:"LoadingIndicator_light__1lhVC",dotContainer:"LoadingIndicator_dotContainer__3C8Kq"}}},[[236,1,2]]]);
//# sourceMappingURL=main.c87ed5ad.chunk.js.map