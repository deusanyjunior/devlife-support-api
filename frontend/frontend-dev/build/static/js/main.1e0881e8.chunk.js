(this["webpackJsonpfrontend-dev"]=this["webpackJsonpfrontend-dev"]||[]).push([[0],{101:function(e){e.exports=JSON.parse('{"Username":"Username","Password":"Password","Type username":"Enter the username","username is a required field":"Required","password is a required field":"Required","Invalid credentials":"Wrong username or password","not-admin":"You don\'t have permission to access this page. Please log in with an authorized user."}')},102:function(e){e.exports=JSON.parse('{"Username":"Usu\xe1rio","Password":"Senha","Type username":"Digite o nome de usu\xe1rio","Student Dashboard":"Dashboard do Aluno","Instructor Dashboard":"Dashboard do Professor","Sign in":"Entrar","username is a required field":"Campo obrigat\xf3rio","password is a required field":"Campo obrigat\xf3rio","Invalid credentials":"Usu\xe1rio ou senha inv\xe1lidos","Logout":"Sair","not-admin":"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Por favor, entre com um usu\xe1rio autorizado."}')},108:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(92),i=n.n(s),c=(n(108),n(16)),o=n(7),l=n(22),u=n(2),d=n(55),j=n.n(d),b="devlife-user-data",m=function(e){e?localStorage.setItem(b,JSON.stringify(e)):localStorage.removeItem(b)},p=function(){var e=localStorage.getItem(b);return e?JSON.parse(e):null},h=n(1),O=Object(a.createContext)({user:null,putUser:function(){},removeUser:function(){}}),f=function(){var e=Object(a.useContext)(O);return{user:e.user,putUser:e.putUser,removeUser:e.removeUser}},x=function(e){var t=e.children,n=Object(a.useState)(p()),r=Object(o.a)(n,2),s=r[0],i=r[1],c=function(e){m(e),i(e)},l=function(){m(null),i(null)},u=Object(a.useMemo)((function(){return{user:s,putUser:c,removeUser:l}}),[s]);return Object(a.useEffect)((function(){if(!s){var e=p();e&&c(e)}}),[s]),Object(h.jsx)(O.Provider,{value:{user:u.user,putUser:u.putUser,removeUser:u.removeUser},children:t})},v=n(240),g=function(e){var t=e.children;return Object(h.jsx)("div",{className:"mx-4",children:t})},N=function(){var e=f().user,t=Object(u.h)();return e&&!e.isStaff?Object(h.jsx)(u.a,{to:{pathname:M.LOGIN,search:"?next=".concat(t.pathname,"&reason=not-admin")}}):null},y=function(e){var t=e.children,n=e.className;return Object(h.jsx)("h1",{className:"".concat(n||""," text-4xl leading-loose"),children:t})},S=function(e){var t=e.onClick,n=e.variant,a=e.children,r=e.type,s=e.disabled,i=e.className,c={primary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-primary hover:bg-primary-dark text-white",secondary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-secondary hover:bg-secondary-dark text-white",hidden:s?"bg-transparent text-gray-500 cursor-default":"bg-transparent"}[n];return Object(h.jsx)("button",{className:"".concat(i," ").concat(c," font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center"),onClick:t,type:r,disabled:s,children:a})};S.defaultProps={className:"",variant:"primary",type:"button"};var I=S,w=function(){var e=Object(v.a)().t,t=f(),n=t.user,a=t.removeUser;return Object(h.jsxs)(h.Fragment,{children:[!n&&Object(h.jsx)(l.b,{to:M.LOGIN,children:e("Login")}),!!n&&Object(h.jsx)(I,{variant:"hidden",onClick:a,children:e("Logout")})]})},T=function(){var e=Object(v.a)().t,t=f().user;return Object(h.jsx)("nav",{className:"py-2 px-4 bg-primary text-white",children:Object(h.jsxs)("ul",{className:"flex items-center",children:[Object(h.jsx)("li",{className:"uppercase font-bold",children:Object(h.jsx)(l.b,{to:"/",children:e("Developer Life")})}),ee.map((function(n){var a=$[n];if(a.permissionTest&&!a.permissionTest(t))return null;var r=a.title;return Object(h.jsx)("li",{className:"ml-4",children:Object(h.jsx)(l.b,{to:n,children:e(r)})},"nav__".concat(n))})),Object(h.jsx)("li",{className:"ml-auto",children:Object(h.jsx)(w,{})})]})})},C=function(){var e=Object(v.a)().t;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{}),Object(h.jsx)(T,{}),Object(h.jsx)(g,{children:Object(h.jsx)(y,{children:e("Instructor Dashboard")})})]})},U=n(34),_=n(20),L=n(103),D=function(e){var t=e.htmlFor,n=e.children;return Object(h.jsx)("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-1",children:n})},k=function(e){var t=e.children;return Object(h.jsx)("p",{className:"text-red-500 text-xs italic",children:t})},E=["error","label","placeholder","inputId","name","type"],F=Object(a.forwardRef)((function(e,t){var n=e.error,a=e.label,r=e.placeholder,s=e.inputId,i=e.name,o=e.type,l=Object(U.a)(e,E);return Object(h.jsxs)("div",{className:"mb-4",children:[a&&Object(h.jsx)(D,{children:a}),Object(h.jsx)("input",Object(c.a)({className:"appearance-none border ".concat(n?"border-red-500":"border-gray-300"," rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),id:s,type:o,name:i,ref:t,placeholder:r||""},l)),n&&Object(h.jsx)(k,{children:n})]})}));F.defaultProps={type:"text"};var P=F,R=function(e){return Object(h.jsx)("form",Object(c.a)({},e))};R.Label=D,R.TextInput=P;var M,q=R,H=n(45),G=H.a().shape({username:H.b().required(),password:H.b().required()}),J=n(239),A=n(27),V=n.n(A),z={initial:{transition:{staggerChildren:.2}},animate:{transition:{staggerChildren:.2}}},B={initial:{y:"0%"},animate:{y:"100%"}},K={duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},Q=function(e){var t=e.light,n=e.className,a="".concat(V.a.loadingDot," ").concat(t?V.a.light:V.a.dark);return Object(h.jsx)("div",{className:"".concat(n||""," ").concat(V.a.animationContainer),children:Object(h.jsxs)(J.a.div,{className:V.a.dotContainer,variants:z,initial:"initial",animate:"animate",children:[Object(h.jsx)(J.a.span,{className:a,variants:B,transition:K}),Object(h.jsx)(J.a.span,{className:a,variants:B,transition:K}),Object(h.jsx)(J.a.span,{className:a,variants:B,transition:K})]})})},W=["onChange"],Y=["onChange"],X=function(){var e,t,n=Object(a.useState)(!1),r=Object(o.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(!1),d=Object(o.a)(l,2),b=d[0],m=d[1],p=Object(v.a)().t,O=f().putUser,x=Object(u.g)(),g=new URLSearchParams(Object(u.h)().search),N=Object(_.d)({resolver:Object(L.a)(G)}),y=N.register,S=N.handleSubmit,w=N.formState.errors,T=y("username"),C=T.onChange,D=Object(U.a)(T,W),E=y("password"),F=E.onChange,P=Object(U.a)(E,Y);return Object(h.jsx)("div",{className:"w-full min-h-screen px-2 flex flex-col justify-center",children:Object(h.jsxs)("div",{className:"max-w-xs mx-auto rounded shadow",children:[Object(h.jsx)("h1",{className:"text-3xl uppercase px-6 py-4 bg-primary text-white rounded-t text-center",children:p("Developer Life")}),Object(h.jsxs)(q,{className:"px-4 py-4",onSubmit:S((function(e){var t,n;m(!0),(t=e.username,n=e.password,j.a.post("/api/auth/login/",{username:t,password:n}).then((function(e){return e.data.key})).then((function(e){return j.a.get("/api/auth/user/",{headers:{Authorization:"Token ".concat(e)}}).then((function(e){return e.data})).then((function(t){return{pk:t.pk,username:t.username,email:t.email,firstName:t.first_name,lastName:t.last_name,isStaff:t.is_staff,token:e}})).catch((function(){return null}))})).catch((function(){return null}))).then((function(e){e?(O(e),x.replace(g.get("next")||"/")):i(!0)})).finally((function(){return m(!1)}))})),children:[Object(h.jsx)(q.TextInput,Object(c.a)(Object(c.a)({label:p("Username"),inputId:"username",placeholder:p("Type username")},D),{},{onChange:function(e){i(!1),C(e)},error:p((null===w||void 0===w||null===(e=w.username)||void 0===e?void 0:e.message)||"")})),Object(h.jsx)(q.TextInput,Object(c.a)(Object(c.a)({label:p("Password"),inputId:"password",type:"password",placeholder:p("Password")},P),{},{onChange:function(e){i(!1),F(e)},error:p((null===w||void 0===w||null===(t=w.password)||void 0===t?void 0:t.message)||"")})),s&&Object(h.jsx)(k,{children:p("Invalid credentials")}),!!g.get("reason")&&Object(h.jsx)(k,{children:p(g.get("reason")||"")}),Object(h.jsx)(I,{className:"mt-2 w-full",type:"submit",disabled:b,children:p("Sign in")}),b&&Object(h.jsx)("div",{className:"w-full flex justify-center",children:Object(h.jsx)(Q,{className:"text-xs"})})]})]})})},Z=function(){var e=Object(v.a)().t,t=f().user;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{}),Object(h.jsxs)(g,{children:[Object(h.jsx)(y,{children:e("Student Dashboard")}),null===t||void 0===t?void 0:t.firstName," ",(null===t||void 0===t?void 0:t.isStaff)?"STAFF":"NOT STAFF"]})]})};!function(e){e.STUDENT_HOME="/",e.INSTRUCTOR_HOME="/instructor",e.LOGIN="/login"}(M||(M={}));var $={};$[M.STUDENT_HOME]={title:"Student Dashboard",props:{path:M.STUDENT_HOME,exact:!0,component:Z}},$[M.INSTRUCTOR_HOME]={title:"Instructor Dashboard",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:M.INSTRUCTOR_HOME,exact:!0,component:C}},$[M.LOGIN]={title:"Login",props:{path:M.LOGIN,exact:!0,component:X}};var ee=[M.STUDENT_HOME,M.INSTRUCTOR_HOME],te=function(){var e=f().user,t=Object(u.h)();return e||t.pathname===M.LOGIN?null:Object(h.jsx)(u.a,{to:{pathname:M.LOGIN,search:"?next=".concat(t.pathname)}})},ne=function(e){var t=e.children;return Object(h.jsx)(x,{children:t})},ae=n(59),re=n(35),se=n(101),ie=n(102);ae.a.use(re.e).init({resources:{en:{translation:se},pt:{translation:ie}},lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1}});ae.a;var ce=function(){return Object(h.jsx)(ne,{children:Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(l.a,{children:[Object(h.jsx)(te,{}),Object(h.jsx)("div",{children:Object(h.jsx)(u.d,{children:Object.entries($).map((function(e,t){var n=Object(o.a)(e,2),a=(n[0],n[1].props);return Object(h.jsx)(u.b,Object(c.a)({},a),"route__".concat(t))}))})})]})})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ce,{})}),document.getElementById("root")),oe()},27:function(e,t,n){e.exports={animationContainer:"LoadingIndicator_animationContainer__31NJQ",loadingDot:"LoadingIndicator_loadingDot__9elUF",dark:"LoadingIndicator_dark__VNh81",light:"LoadingIndicator_light__1lhVC",dotContainer:"LoadingIndicator_dotContainer__3C8Kq"}}},[[236,1,2]]]);
//# sourceMappingURL=main.1e0881e8.chunk.js.map