(this["webpackJsonpfrontend-dev"]=this["webpackJsonpfrontend-dev"]||[]).push([[0],{128:function(e){e.exports=JSON.parse('{"Username":"Username","Password":"Password","Type username":"Enter the username","username is a required field":"Required","password is a required field":"Required","Invalid credentials":"Wrong username or password","not-admin":"You don\'t have permission to access this page. Please log in with an authorized user.","submissions sent before":"{{users}} students submitted {{total}} answers before {{lastUpdate}}"}')},129:function(e){e.exports=JSON.parse('{"Username":"Usu\xe1rio","Password":"Senha","Type username":"Digite o nome de usu\xe1rio","Student Dashboard":"Dashboard do Aluno","Instructor Dashboard":"Dashboard do Professor","Sign in":"Entrar","username is a required field":"Campo obrigat\xf3rio","password is a required field":"Campo obrigat\xf3rio","Invalid credentials":"Usu\xe1rio ou senha inv\xe1lidos","Logout":"Sair","not-admin":"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Por favor, entre com um usu\xe1rio autorizado.","submissions sent before":"{{users}} alunos enviaram {{total}} respostas at\xe9 {{lastUpdate}}","Dashboard":"Acompanhamento","Exercises":"Exerc\xedcios","Topic":"Aula","Content":"Conte\xfado","Results":"Resultados","Last attempt":"\xdaltima tentativa","Max points":"Pontua\xe7\xe3o","Attempts":"Tentativas","Tests passing":"Testes passando","Your solution":"Sua solu\xe7\xe3o"}')},136:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(116),c=n.n(s),i=n(22),o=(n(136),n(14)),l=n(4),u=n(10),d=n(13),j=n.n(d),b=n(17),f=n(33),m=n.n(f),O=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.post("/api/auth/login/",{username:t,password:n}).then((function(e){return e.data.key})).then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.get("/api/auth/user/",{headers:{Authorization:"Token ".concat(t)}}).then((function(e){return e.data})).then((function(e){return{pk:e.pk,username:e.username,email:e.email,firstName:e.first_name,lastName:e.last_name,isStaff:e.is_staff,token:t}})).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p="devlife-user-data",h=function(e){e?localStorage.setItem(p,JSON.stringify(e)):localStorage.removeItem(p)},x=function(){var e=localStorage.getItem(p);return e?JSON.parse(e):null},v=n(1),g=Object(r.createContext)({user:null,putUser:function(){},removeUser:function(){}}),N=function(){var e=Object(r.useContext)(g);return{user:e.user,putUser:e.putUser,removeUser:e.removeUser}},y=function(e){var t=e.children,n=Object(r.useState)(x()),a=Object(l.a)(n,2),s=a[0],c=a[1],i=function(e){h(e),c(e)},o=function(){h(null),c(null)},u=Object(r.useMemo)((function(){return{user:s,putUser:i,removeUser:o}}),[s]);return Object(r.useEffect)((function(){if(!s){var e=x();e&&i(e)}}),[s]),Object(v.jsx)(g.Provider,{value:{user:u.user,putUser:u.putUser,removeUser:u.removeUser},children:t})},w=n(11),S=n(6),k=n(292),E=function(e){var t=e.className,n=e.children;return Object(v.jsx)("div",{className:"mx-4 ".concat(t),children:n})};function _(e){var t=e.data;if(!t.length)return null;var n=Object.keys(t[0]),r=t.map((function(e){return Object.values(e)}));return Object(v.jsx)("div",{className:"flex m-2",children:Object(v.jsx)("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:Object(v.jsx)("div",{className:"align-middle inline-block",children:Object(v.jsx)("div",{className:"border-b border-gray-200 rounded-lg overflow-hidden border",children:Object(v.jsxs)("table",{className:"divide-y divide-gray-200",children:[Object(v.jsx)("thead",{className:"bg-gray-50",children:Object(v.jsx)("tr",{children:n.map((function(e,t){return Object(v.jsx)("th",{className:"p-3",children:e},"header__"+t)}))})}),Object(v.jsx)("tbody",{className:"bg-white divide-y divide-gray-50",children:r.map((function(e,t){return Object(v.jsx)("tr",{className:t%2?"bg-gray-100":"bg-gray-50",children:e.map((function(e,n){return Object(v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:null!==e&&void 0!==e?e:""},"cell__".concat(n).concat(t))}))},"textAnswers__"+t)}))})]})})})})})}var C=Object(r.memo)(_),R=n(62);function I(e){var t={labels:e.options,datasets:[{data:e.numSelectedOptions,backgroundColor:["#ff638433","#76f25d33","#36a2eb33","#ffce5633","#765df233","#21fcf233","#ff9f4033"],borderColor:["#ff6384","#76f25d","#36a2eb","#ffce56","#765df2","#21fcf2","#ff9f40"],borderWidth:2}]};return Object(v.jsx)("div",{className:"sm:w-2/3 md:w-1/3 lg:w-1/4",children:Object(v.jsx)(R.b,{data:t,options:{maintainAspectRatio:!0}})})}var T=Object(r.memo)(I),L=function(e){var t=e.onClick,n=e.variant,r=e.children,a=e.type,s=e.disabled,c=e.className,i={primary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-primary hover:bg-primary-500 text-white",secondary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-secondary hover:bg-secondary-500 text-white",hidden:s?"bg-transparent text-gray-500 cursor-default":"bg-transparent"}[n];return Object(v.jsx)("button",{className:"".concat(c," ").concat(i," font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center"),onClick:t,type:a,disabled:s,children:r})};L.defaultProps={className:"",variant:"primary",type:"button"};var U=L,D=function(){var e=Object(k.a)().t,t=N(),n=t.user,r=t.removeUser;return Object(v.jsxs)(v.Fragment,{children:[!n&&Object(v.jsx)(i.b,{to:pe.LOGIN,children:e("Login")}),!!n&&Object(v.jsx)(U,{variant:"hidden",onClick:r,children:e("Logout")})]})},M=function(){var e=Object(k.a)().t,t=N().user;return Object(v.jsx)("nav",{className:"py-2 px-4",children:Object(v.jsxs)("ul",{className:"flex items-center",children:[Object(v.jsx)("li",{className:"uppercase font-bold",children:Object(v.jsx)(i.b,{to:"/",children:e("Developer Life")})}),Re.map((function(n){var r=Ce[n];if(r.permissionTest&&!r.permissionTest(t))return null;var a=r.title;return Object(v.jsx)("li",{className:"ml-4",children:Object(v.jsx)(i.b,{to:n,children:e(a)})},"nav__".concat(n))})),Object(v.jsx)("li",{className:"ml-auto",children:Object(v.jsx)(D,{})})]})})};function A(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Object(l.a)(r[n],2),s=a[0],c=a[1],i=new RegExp(":".concat(s),"g");e=e.replace(i,String(c))}return e}var P=m.a.create({baseURL:"/"});P.interceptors.request.use((function(e){var t=x();return t&&(e.headers=Object(o.a)(Object(o.a)({},e.headers),{},{Authorization:"Token ".concat(t.token)})),e}));var F=function(){var e=Object(k.a)().t,t=Object(u.i)(),n=t.offering,a=t.slug,s=Object(r.useState)([]),c=Object(l.a)(s,2),o=c[0],d=c[1],j=Object(r.useMemo)((function(){return o.filter((function(e){return"string"===typeof e.long_answer})).map((function(e){return{timestamp:e.submission_date,summary:e.summary,long:e.long_answer}}))}),[o]),b=Object(r.useMemo)((function(){return o.filter((function(e){return!("string"===typeof e.summary)})).map((function(e){return e.summary}))}),[o]);Object(r.useEffect)((function(){var e=!0;return P.get(A("/api/offerings/:offering/exercises/:slug/answers/",{offering:n,slug:a})).then((function(t){e&&d(t.data||[])})),function(){e=!1}}),[]);var f=Object(r.useMemo)((function(){var e;return(null===(e=b[0])||void 0===e?void 0:e.num_choices)||0}),[b]),m=Object(r.useMemo)((function(){var e=Object(S.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ");e.length=f;var t=b.map((function(t){return e[(null===t||void 0===t?void 0:t.choice)||0]})),n={};return e.forEach((function(e){n[e]=t.filter((function(t){return t===e})).length})),[e,Object.values(n)]}),[b,f]),O=Object(l.a)(m,2),p=O[0],h=O[1];return Object(v.jsxs)(E,{children:[Object(v.jsx)(M,{}),Object(v.jsx)(i.b,{to:pe.INSTRUCTOR_HOME,className:"bg-gray-100 text-blue-500 px-4 py-2",children:Object(v.jsx)("b",{children:e("Go back")})}),Object(v.jsxs)("div",{className:"my-4 p-4 fit-content",children:[Object(v.jsxs)("p",{className:"mr-4",children:[Object(v.jsxs)("b",{children:[e("Offering"),":"]})," ",n]}),Object(v.jsxs)("p",{className:"mr-4",children:[Object(v.jsxs)("b",{children:[e("Exercise slug"),":"]})," ",a]}),Object(v.jsxs)("p",{children:[Object(v.jsxs)("b",{children:[e("Multiple choices answers"),":"]})," ",b.length]}),Object(v.jsxs)("p",{children:[Object(v.jsxs)("b",{children:[e("Text answers"),":"]})," ",j.length]})]}),!!b.length&&Object(v.jsx)(T,{options:p,numSelectedOptions:h}),!!j.length&&Object(v.jsx)(C,{data:j.map((function(t){var n;return n={},Object(w.a)(n,e("Submission time"),new Date(t.timestamp).toLocaleString()),Object(w.a)(n,e("Summary"),t.summary),Object(w.a)(n,e("Long answer"),Object(v.jsx)(U,{variant:"primary",onClick:function(){console.log(t.long)},children:"click me"})),n}))})]})},q=function(){var e=N().user,t=Object(u.h)();return e&&!e.isStaff?Object(v.jsx)(u.a,{to:{pathname:pe.LOGIN,search:"?next=".concat(t.pathname,"&reason=not-admin")}}):null},G=function(e){var t=e.variant,n=e.children,r=e.className,a=5===t?"h5":2===t?"h2":"h1",s=5===t?"":2===t?"text-2xl":"text-4xl",c=!r||r.indexOf("mt-")<0&&r.indexOf("my-")<0?"mt-4":"";return Object(v.jsx)(a,{className:"".concat(r||""," uppercase font-bold ").concat(s," leading-none tracking-wide ").concat(c),children:n})};G.defaultProps={variant:1};var W=G,H=function(e,t,n,a){var s=Object(r.useState)(t),c=Object(l.a)(s,2),i=c[0],o=c[1],u=Object(r.useState)(),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(r.useState)(!0),O=Object(l.a)(f,2),p=O[0],h=O[1],x=function(){var t={};n&&(t.headers={Authorization:"Token ".concat(n)}),h(!0),b(void 0),m.a.get(e,t).then((function(e){return e.data})).then(o).catch((function(e){return b(e)})).finally((function(){return h(!1)}))};return Object(r.useEffect)((function(){a||x()}),[e,n,a]),{data:i,error:j,loading:p,refresh:x}},J=function(e,t){var n=H(A("/api/offerings/:offering/exercises/",{offering:String(e)}),[],t);return{exerciseList:n.data,error:n.error,loading:n.loading,refresh:n.refresh}},V=function(e){var t=e.offering,n=e.slug,a=N().user,s=function(e,t,n,r){var a=r?"?user=".concat(r):"",s=H("".concat(A("/api/offerings/:offering/summaries/:exerciseSlug/",{offering:e,exerciseSlug:t})).concat(a),[],n);return{summaryList:s.data,error:s.error,loading:s.loading,refresh:s.refresh}}(t,n,(null===a||void 0===a?void 0:a.token)||""),c=s.summaryList,o=s.loading,u=s.refresh,d=Object(k.a)().t,j=Object(r.useState)(0),b=Object(l.a)(j,2),f=b[0],m=b[1],O=Object(r.useState)(0),p=Object(l.a)(O,2),h=p[0],x=p[1],g=Object(r.useState)(),y=Object(l.a)(g,2),w=y[0],S=y[1];Object(r.useEffect)((function(){o||(x(c.length),m(c.map((function(e){return e.answer_count})).reduce((function(e,t){return e+t}),0)),S(new Date))}),[o,c]);var E=A(pe.EXERCISE_ANSWERS,{offering:t,slug:n});return Object(v.jsxs)("div",{className:"bg-gray-100 p-4 flex flex-col",children:[Object(v.jsxs)("div",{className:"flex-grow",children:[Object(v.jsxs)("p",{children:[" ",n," "]}),!!w&&Object(v.jsx)("p",{children:d("submissions sent before",{total:f,users:h,lastUpdate:null===w||void 0===w?void 0:w.toLocaleString()})})]}),Object(v.jsxs)("div",{className:"flex flex-row mt-4 justify-around",children:[Object(v.jsx)(i.b,{to:E,children:Object(v.jsx)(U,{children:d("See details")})}),Object(v.jsx)(U,{onClick:u,children:d("Reload")})]})]})},z=function(){var e=Object(k.a)().t,t=N().user,n=(null===t||void 0===t?void 0:t.token)||"",r=J(1,n).exerciseList;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{}),Object(v.jsx)(M,{}),Object(v.jsxs)(E,{children:[Object(v.jsx)(W,{children:e("Instructor Dashboard")}),Object(v.jsx)("div",{className:"grid gap-1 grid-cols-3 mt-4",children:r.map((function(e){return Object(v.jsx)(V,{offering:1,slug:e.slug},"exercise-".concat(e.slug))}))})]})]})},X=n(47),B=n(30),Y=n(130),K=function(e){var t=e.htmlFor,n=e.children;return Object(v.jsx)("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-1",children:n})},Q=function(e){var t=e.children;return Object(v.jsx)("p",{className:"text-red-500 text-xs italic",children:t})},Z=["error","label","placeholder","inputId","name","type"],$=Object(r.forwardRef)((function(e,t){var n=e.error,r=e.label,a=e.placeholder,s=e.inputId,c=e.name,i=e.type,l=Object(X.a)(e,Z);return Object(v.jsxs)("div",{className:"mb-4",children:[r&&Object(v.jsx)(K,{htmlFor:s,children:r}),Object(v.jsx)("input",Object(o.a)({className:"appearance-none border ".concat(n?"border-red-500":"border-gray-300"," rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),id:s,type:i,name:c,ref:t,placeholder:a||""},l)),n&&Object(v.jsx)(Q,{children:n})]})}));$.defaultProps={type:"text"};var ee=$,te=function(e){return Object(v.jsx)("form",Object(o.a)({},e))};te.Label=K,te.TextInput=ee;var ne=te,re=n(63),ae=re.a().shape({username:re.b().required(),password:re.b().required()}),se=n(291),ce=n(40),ie=n.n(ce),oe={initial:{transition:{staggerChildren:.2}},animate:{transition:{staggerChildren:.2}}},le={initial:{y:"0%"},animate:{y:"100%"}},ue={duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},de=function(e){var t=e.light,n=e.className,r="".concat(ie.a.loadingDot," ").concat(t?ie.a.light:ie.a.dark);return Object(v.jsx)("div",{className:"".concat(n||""," ").concat(ie.a.animationContainer),children:Object(v.jsxs)(se.a.div,{className:ie.a.dotContainer,variants:oe,initial:"initial",animate:"animate",children:[Object(v.jsx)(se.a.span,{className:r,variants:le,transition:ue}),Object(v.jsx)(se.a.span,{className:r,variants:le,transition:ue}),Object(v.jsx)(se.a.span,{className:r,variants:le,transition:ue})]})})},je=["onChange"],be=["onChange"],fe=function(){var e,t,n=Object(r.useRef)(!1);Object(r.useEffect)((function(){return function(){n.current=!0}}),[]);var a=Object(r.useState)(!1),s=Object(l.a)(a,2),c=s[0],i=s[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),b=j[0],f=j[1],m=Object(k.a)().t,p=N(),h=p.user,x=p.putUser,g=Object(u.g)(),y=new URLSearchParams(Object(u.h)().search),w=y.get("redirectTo");Object(r.useEffect)((function(){h&&w&&(w=decodeURIComponent(w),w+="".concat(w.indexOf("?")>=0?"&":"?","token=").concat(h.token),window.location.href=w)}),[h,w]);var S=Object(B.d)({resolver:Object(Y.a)(ae)}),E=S.register,_=S.handleSubmit,C=S.formState.errors,R=E("username"),I=R.onChange,T=Object(X.a)(R,je),L=E("password"),D=L.onChange,M=Object(X.a)(L,be);return Object(v.jsx)("div",{className:"w-full min-h-screen px-2 flex flex-col justify-center",children:Object(v.jsxs)("div",{className:"max-w-xs mx-auto rounded shadow",children:[Object(v.jsx)("h1",{className:"text-3xl uppercase px-6 py-4 bg-primary text-white rounded-t text-center",children:m("Developer Life")}),Object(v.jsxs)(ne,{className:"px-4 py-4",onSubmit:_((function(e){f(!0),O(e.username,e.password).then((function(e){n.current||(e?(x(e),w||g.replace(y.get("next")||"/")):i(!0))})).finally((function(){return!n.current&&f(!1)}))})),children:[Object(v.jsx)(ne.TextInput,Object(o.a)(Object(o.a)({label:m("Username"),inputId:"username",placeholder:m("Type username")},T),{},{onChange:function(e){i(!1),I(e)},error:m((null===C||void 0===C||null===(e=C.username)||void 0===e?void 0:e.message)||"")})),Object(v.jsx)(ne.TextInput,Object(o.a)(Object(o.a)({label:m("Password"),inputId:"password",type:"password",placeholder:m("Password")},M),{},{onChange:function(e){i(!1),D(e)},error:m((null===C||void 0===C||null===(t=C.password)||void 0===t?void 0:t.message)||"")})),c&&Object(v.jsx)(Q,{children:m("Invalid credentials")}),!!y.get("reason")&&Object(v.jsx)(Q,{children:m(y.get("reason")||"")}),Object(v.jsx)(U,{className:"mt-2 w-full",type:"submit",disabled:b,children:m("Sign in")}),b&&Object(v.jsx)("div",{className:"w-full flex justify-center",children:Object(v.jsx)(de,{className:"text-xs"})})]})]})})},me=function(e){var t=e.children,n=e.className;return Object(v.jsx)("h2",{className:"".concat(n||""," text-2xl text-primary leading-none mt-1"),children:t})},Oe=function(e){var t=e.className,n=e.progress,r=180*Math.PI;n<0&&(n=0),n>1&&(n=1);var a=110*Math.sqrt(2),s={start:{strokeDashoffset:r},progress:{strokeDashoffset:r*(1-n),transition:{duration:.5}}},c={start:{strokeDashoffset:a},progress:{strokeDashoffset:0,transition:{duration:.5,delay:.2}}};return Object(v.jsxs)("svg",{className:t||"",id:"svg",width:"200",height:"200",viewBox:"0 0 200 200",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("circle",{r:"90",cx:"100",cy:"100",fill:"transparent",stroke:"#cad8ca",strokeWidth:"20"}),Object(v.jsx)(se.a.circle,{r:"90",cx:"100",cy:"100",fill:"transparent",stroke:"#27A5A2",transform:"rotate(-90 100 100)",strokeWidth:"20",strokeDasharray:"".concat(r),strokeDashoffset:"".concat(r*(1-n)),variants:s,initial:"start",animate:"progress"}),1===n&&Object(v.jsx)(se.a.path,{d:"M45 95L85 135L155 65",fill:"transparent",stroke:"#27A5A2",strokeWidth:"20",strokeDasharray:"".concat(a),strokeDashoffset:"0",variants:c,initial:"start",animate:"progress"})]})};Oe.defaultProps={progress:1};var pe,he=Oe,xe=function(e){var t=e.options,n=e.onSelect,r=e.title,a=e.completionRates,s=e.selectedRow;return Object(v.jsxs)("div",{className:"border border-gray-200 py-2 overflow-hidden",children:[Object(v.jsx)(W,{variant:5,className:"px-4 mt-2",children:r}),Object(v.jsx)("ul",{className:"mt-4",children:t.map((function(e,r){return Object(v.jsxs)("li",{onClick:function(){return function(e){n&&n(t[e],e)}(r)},className:"flex items-center cursor-pointer px-4 py-1 ".concat(r===s?"bg-primary-50":""),children:[Object(v.jsx)("div",{className:"min-w-min mr-2",children:Object(v.jsx)(he,{className:"w-6 h-6",progress:a[e]})}),e]},"option-".concat(e,"-").concat(r))}))})]})},ve=function(e){var t,n,r=e.offering,a=e.summaryMap,s=e.exercise,c=Object(k.a)().t,i=N().user,o=a[null===s||void 0===s?void 0:s.pk],l=function(e,t,n,r){var a=H(A("/api/offerings/:offering/exercises/:exerciseSlug/answers/:answerId/",{offering:e,exerciseSlug:n,answerId:r}),null,t,!(n&&t&&void 0!==r&&void 0!==e));return{answer:a.data,error:a.error,loading:a.loading,refresh:a.refresh}}(r,(null===i||void 0===i?void 0:i.token)||"",null===s||void 0===s?void 0:s.slug,null===o||void 0===o?void 0:o.latest).answer;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(W,{variant:5,className:"px-4 mt-2",children:(null===s||void 0===s?void 0:s.slug)||""}),Object(v.jsxs)("div",{className:"px-4 mt-4",children:[Object(v.jsx)(U,{className:"uppercase tracking-wide",children:"Ver Exerc\xedcio"}),Object(v.jsxs)("section",{className:"mt-6",children:[Object(v.jsx)(W,{variant:5,children:c("Results")}),Object(v.jsxs)("div",{className:"flex flex-wrap mt-2",children:[Object(v.jsxs)("span",{className:"mr-8",children:[c("Max points"),":"," ",Object(v.jsxs)("strong",{className:"font-bold text-primary-500",children:[Math.round(1e4*((null===o||void 0===o?void 0:o.max_points)||0))/100,"%"]})]}),Object(v.jsxs)("span",{className:"mr-8",children:[c("Attempts"),":"," ",Object(v.jsx)("strong",{className:"font-bold",children:(null===o||void 0===o?void 0:o.answer_count)||0})]})]})]}),"CODE"===s.type&&Object(v.jsxs)("section",{className:"mt-6",children:[Object(v.jsx)("h6",{className:"font-bold",children:c("Last attempt")}),Object(v.jsx)("div",{className:"flex flex-wrap mt-2",children:Object(v.jsxs)("span",{className:"mr-8",children:[c("Tests passing"),":"," ",Object(v.jsx)("strong",{className:"font-bold",children:l&&l.summary?null===(t=l.summary)||void 0===t?void 0:t.passed:"0"})]})}),(null===l||void 0===l||null===(n=l.long_answer)||void 0===n?void 0:n.code)&&Object(v.jsxs)("div",{className:"mt-4",children:[Object(v.jsxs)("strong",{className:"font-bold",children:[c("Your solution"),":"]}),Object(v.jsx)("pre",{className:"mt-2 bg-black text-white py-4 px-4",children:l.long_answer.code})]})]})]})]})},ge=function(e){var t=e.group,n=e.completionRates,r=Object.keys(t)[0];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(W,{variant:5,className:"px-4 mt-2",children:r}),Object(v.jsx)("div",{className:"px-4 mt-4",children:Object(v.jsx)(he,{progress:n[r]||0})})]})},Ne=function(e){var t=e.topic,n=e.completionRates,r=Object.keys(t)[0];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(W,{variant:5,className:"px-4 mt-2",children:r}),Object(v.jsx)("div",{className:"px-4 mt-4",children:Object(v.jsx)(he,{progress:n[r]||0})})]})},ye=function(e,t,n,r){var a,s;if(!e)return null;if(e.slug)return Object(v.jsx)(ve,{offering:t,summaryMap:n,exercise:e});var c=Object.keys(e);if(c&&(null===(a=e[c[0]])||void 0===a?void 0:a.length))return Object(v.jsx)(ge,{group:e,completionRates:r});var i=Object.keys(e[c[0]]);return c&&i&&(null===(s=e[c[0]][i[0]])||void 0===s?void 0:s.length)?Object(v.jsx)(Ne,{topic:e,completionRates:r}):null},we=function(e){var t=e.data,n=e.offering,r=e.summaryMap,a=e.completionRates;return Object(v.jsx)(v.Fragment,{children:ye(t,n,r,a)})},Se=function(e,t){return Object.fromEntries(e.map((function(e){var n=t[e.pk];return[e.slug,n?n.max_points:0]})))},ke=function(e,t){return Object.fromEntries(Object.keys(e).map((function(n){var r=Object.values(Se(e[n],t));return[n,r.reduce((function(e,t){return e+t}),0)/r.length]})))},Ee=function(e){var t=e.exerciseGroups,n=e.summaryMap,a=e.className,s=Object(k.a)().t,c=Object(r.useState)(""),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(""),j=Object(l.a)(d,2),b=j[0],f=j[1],m=Object(r.useState)({}),O=Object(l.a)(m,2),p=O[0],h=O[1];Object(r.useEffect)((function(){h(function(e,t){return Object.assign.apply(Object,[{}].concat(Object(S.a)(Object.keys(e).map((function(n){var r=e[n],a=Object.keys(r).map((function(e){return r[e]})).reduce((function(e,t){return e||t?e?t?e.concat(t):e:t:[]}),[]);return ke(Object(w.a)({},n,a),t)})))))}(t,n))}),[t,n]);var x=Object(r.useState)({}),g=Object(l.a)(x,2),N=g[0],y=g[1],E=Object(r.useState)({}),_=Object(l.a)(E,2),C=_[0],R=_[1];Object(r.useEffect)((function(){var e=o?t[o]:{};y(e),e&&R(ke(e,n))}),[o,t,n]);var I=Object(r.useState)([]),T=Object(l.a)(I,2),L=T[0],U=T[1],D=Object(r.useState)({}),M=Object(l.a)(D,2),A=M[0],P=M[1];Object(r.useEffect)((function(){var e=N[b];U(Object.keys(N)&&b?e.map((function(e){return e.slug})):[]),e&&P(Se(e,n))}),[N,b,n]);var F=Object(r.useState)(-1),q=Object(l.a)(F,2),G=q[0],W=q[1],H=Object(r.useState)(-1),J=Object(l.a)(H,2),V=J[0],z=J[1],X=Object(r.useState)(-1),B=Object(l.a)(X,2),Y=B[0],K=B[1],Q=Object(r.useState)(0),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1],te=Object(r.useState)(null),ne=Object(l.a)(te,2),re=ne[0],ae=ne[1];return Object(v.jsxs)("div",{className:"grid grid-cols-6 shadow-sm ".concat(a||""),children:[Object(v.jsx)(xe,{title:s("Topic"),options:Object.keys(t),onSelect:function(e,n){u(e),ae(Object(w.a)({},e,t[e])),f(""),W(n),z(-1),K(-1),ee(0)},completionRates:p,selectedRow:G}),Object(v.jsx)(xe,{title:s("Content"),options:Object.keys(N),onSelect:function(e,t){f(e),ae(Object(w.a)({},e,N[e])),z(t),K(-1),ee(1)},completionRates:C,selectedRow:V}),Object(v.jsx)(xe,{title:s("Exercises"),options:L,onSelect:function(e,t){var n=N[b][t];ae(n),K(t),ee(2)},completionRates:A,selectedRow:Y}),Object(v.jsx)("div",{className:"col-start-4 col-end-7 border border-gray-200 py-2",children:Object(v.jsx)(we,{offering:1,data:re,summaryMap:n,completionRates:[p,C,A][$]})})]})},_e=function(){var e=Object(k.a)().t,t=N().user,n=Object(r.useState)({}),a=Object(l.a)(n,2),s=a[0],c=a[1],i=(null===t||void 0===t?void 0:t.token)||"",o=J(1,i).exerciseList;Object(r.useEffect)((function(){c(function(e){var t={};return e.forEach((function(e){var n=e.topic,r=e.group;t[n]||(t[n]={}),t[n][r]||(t[n][r]=[]),t[n][r].push(e)})),t}(o))}),[o]);var u=function(e,t,n){var r=n?"?user=".concat(n):"",a=H("".concat(A("/api/offerings/:offering/summaries/",{offering:e})).concat(r),[],t);return{summaryList:a.data,error:a.error,loading:a.loading,refresh:a.refresh}}(1,i,null===t||void 0===t?void 0:t.pk),d=u.summaryList,j=u.loading,b=Object(r.useState)({}),f=Object(l.a)(b,2),m=f[0],O=f[1];return Object(r.useEffect)((function(){j||O(function(e){return Object.fromEntries(e.map((function(e){return[e.exercise,e]})))}(d))}),[d,j]),t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M,{}),Object(v.jsxs)(E,{children:[Object(v.jsx)(W,{children:e("Dashboard")}),Object(v.jsx)(me,{children:"".concat(t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName)}),Object(v.jsxs)("section",{className:"my-8",children:[Object(v.jsx)(W,{variant:2,children:e("Exercises")}),Object(v.jsx)(Ee,{exerciseGroups:s,summaryMap:m,className:"mt-4"})]})]})]}):null};!function(e){e.STUDENT_HOME="/",e.INSTRUCTOR_HOME="/instructor",e.EXERCISE_ANSWERS="/instructor/answers/:offering/:slug/",e.LOGIN="/login"}(pe||(pe={}));var Ce={};Ce[pe.STUDENT_HOME]={title:"Student Dashboard",props:{path:pe.STUDENT_HOME,exact:!0,component:_e}},Ce[pe.INSTRUCTOR_HOME]={title:"Instructor Dashboard",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:pe.INSTRUCTOR_HOME,exact:!0,component:z}},Ce[pe.EXERCISE_ANSWERS]={title:"Exercise Answers",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:pe.EXERCISE_ANSWERS,exact:!0,component:F}},Ce[pe.LOGIN]={title:"Login",props:{path:pe.LOGIN,exact:!0,component:fe}};var Re=[pe.INSTRUCTOR_HOME],Ie=function(){var e=N().user,t=Object(u.h)();return e||t.pathname===pe.LOGIN?null:Object(v.jsx)(u.a,{to:{pathname:pe.LOGIN,search:"?next=".concat(t.pathname)}})},Te=function(e){var t=e.children;return Object(v.jsx)(y,{children:t})},Le=n(82),Ue=n(48),De=n(128),Me=n(129);Le.a.use(Ue.e).init({resources:{en:{translation:De},pt:{translation:Me}},lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1}});Le.a;var Ae=function(){return Object(v.jsx)(Te,{children:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(Ie,{}),Object(v.jsx)("div",{children:Object(v.jsx)(u.d,{children:Object.entries(Ce).map((function(e,t){var n=Object(l.a)(e,2),r=(n[0],n[1].props);return Object(v.jsx)(u.b,Object(o.a)({},r),"route__".concat(t))}))})})]})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,293)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(Ae,{})})}),document.getElementById("root")),Pe()},40:function(e,t,n){e.exports={animationContainer:"LoadingIndicator_animationContainer__31NJQ",loadingDot:"LoadingIndicator_loadingDot__9elUF",dark:"LoadingIndicator_dark__VNh81",light:"LoadingIndicator_light__1lhVC",dotContainer:"LoadingIndicator_dotContainer__3C8Kq"}}},[[289,1,2]]]);
//# sourceMappingURL=main.e0ef285b.chunk.js.map