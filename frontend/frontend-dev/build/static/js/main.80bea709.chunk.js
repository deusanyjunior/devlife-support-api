(this["webpackJsonpfrontend-dev"]=this["webpackJsonpfrontend-dev"]||[]).push([[0],{128:function(e,t,r){e.exports={separator:"Separator_separator__e39e6"}},130:function(e){e.exports=JSON.parse('{"Username":"Username","Password":"Password","Type username":"Enter the username","username is a required field":"Required","password is a required field":"Required","Invalid password reset link":"Invalid password reset link. Request a new link to reset your password.","Invalid credentials":"Wrong username or password","not-admin":"You don\'t have permission to access this page. Please log in with an authorized user.","submissions sent before":"{{users}} students submitted {{total}} answers before {{lastUpdate}}"}')},131:function(e){e.exports=JSON.parse('{"Username":"Usu\xe1rio","Password":"Senha","Repeat password":"Confirmar senha","Set password":"Definir senha","Reset password":"Redefinir senha","Passwords must match":"As senhas devem ser iguais","Invalid password reset link":"Link de redefini\xe7\xe3o de senha inv\xe1lido. Solicite um novo link para redefinir sua senha.","Type username":"Nome de usu\xe1rio","Student Dashboard":"Dashboard do Aluno","Instructor Dashboard":"Dashboard do Professor","Sign in":"Entrar","Sign up":"Criar conta","Ask the instructor to sign you up":"Se n\xe3o tiver recebido um e-mail com o link de cadastro, pe\xe7a para o seu professor envi\xe1-lo novamente.","username is a required field":"Campo obrigat\xf3rio","password is a required field":"Campo obrigat\xf3rio","Invalid credentials":"Usu\xe1rio ou senha inv\xe1lidos","Logout":"Sair","not-admin":"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Por favor, entre com um usu\xe1rio autorizado.","submissions sent before":"{{users}} alunos enviaram {{total}} respostas at\xe9 {{lastUpdate}}","Dashboard":"Acompanhamento","Exercises":"Exerc\xedcios","Topic":"Aula","Content":"Conte\xfado","Results":"Resultados","Last attempt":"\xdaltima tentativa","Max points":"Pontua\xe7\xe3o","Attempts":"Tentativas","Tests passing":"Testes passando","Your solution":"Sua solu\xe7\xe3o","or":"ou"}')},137:function(e,t,r){},286:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(118),c=r.n(s),i=r(21),o=(r(137),r(14)),l=r(4),u=r(7),d=r(11),j=r.n(d),b=r(16),f=r(31),m=r.n(f),p=function(){var e=Object(b.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.post("/api/auth/login/",{username:t,password:r}).then((function(e){return e.data.key})).then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.get("/api/auth/user/",{headers:{Authorization:"Token ".concat(t)}}).then((function(e){return e.data})).then((function(e){return{pk:e.pk,username:e.username,email:e.email,firstName:e.first_name,lastName:e.last_name,isStaff:e.is_staff,token:t}})).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(j.a.mark((function e(t,r,n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.post("/api/auth/password/reset/confirm/",{uid:t,token:r,new_password1:n,new_password2:a}).then((function(){return!0})).catch((function(){return!1})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),h="devlife-user-data",x=function(e){e?localStorage.setItem(h,JSON.stringify(e)):localStorage.removeItem(h)},v=function(){var e=localStorage.getItem(h);return e?JSON.parse(e):null},g=r(1),w=Object(n.createContext)({user:null,putUser:function(){},removeUser:function(){}}),y=function(){var e=Object(n.useContext)(w);return{user:e.user,putUser:e.putUser,removeUser:e.removeUser}},N=function(e){var t=e.children,r=Object(n.useState)(v()),a=Object(l.a)(r,2),s=a[0],c=a[1],i=function(e){x(e),c(e)},o=function(){x(null),c(null)},u=Object(n.useMemo)((function(){return{user:s,putUser:i,removeUser:o}}),[s]);return Object(n.useEffect)((function(){if(!s){var e=v();e&&i(e)}}),[s]),Object(g.jsx)(w.Provider,{value:{user:u.user,putUser:u.putUser,removeUser:u.removeUser},children:t})},S=r(12),k=r(6),E=r(289),R=function(e){var t=e.className,r=e.children;return Object(g.jsx)("div",{className:"mx-4 ".concat(t),children:r})};function C(e){var t=e.data;if(!t.length)return null;var r=Object.keys(t[0]),n=t.map((function(e){return Object.values(e)}));return Object(g.jsx)("div",{className:"flex m-2",children:Object(g.jsx)("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:Object(g.jsx)("div",{className:"align-middle inline-block",children:Object(g.jsx)("div",{className:"border-b border-gray-200 rounded-lg overflow-hidden border",children:Object(g.jsxs)("table",{className:"divide-y divide-gray-200",children:[Object(g.jsx)("thead",{className:"bg-gray-50",children:Object(g.jsx)("tr",{children:r.map((function(e,t){return Object(g.jsx)("th",{className:"p-3",children:e},"header__"+t)}))})}),Object(g.jsx)("tbody",{className:"bg-white divide-y divide-gray-50",children:n.map((function(e,t){return Object(g.jsx)("tr",{className:t%2?"bg-gray-100":"bg-gray-50",children:e.map((function(e,r){return Object(g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:null!==e&&void 0!==e?e:""},"cell__".concat(r).concat(t))}))},"textAnswers__"+t)}))})]})})})})})}var _=Object(n.memo)(C),I=r(63);function T(e){var t={labels:e.options,datasets:[{data:e.numSelectedOptions,backgroundColor:["#ff638433","#76f25d33","#36a2eb33","#ffce5633","#765df233","#21fcf233","#ff9f4033"],borderColor:["#ff6384","#76f25d","#36a2eb","#ffce56","#765df2","#21fcf2","#ff9f40"],borderWidth:2}]};return Object(g.jsx)("div",{className:"sm:w-2/3 md:w-1/3 lg:w-1/4",children:Object(g.jsx)(I.b,{data:t,options:{maintainAspectRatio:!0}})})}var L=Object(n.memo)(T),D=function(e){var t=e.onClick,r=e.variant,n=e.children,a=e.type,s=e.disabled,c=e.className,i={primary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-primary hover:bg-primary-500 text-white",secondary:s?"bg-gray-300 text-gray-500 cursor-default":"bg-secondary hover:bg-secondary-500 text-white",hidden:s?"bg-transparent text-gray-500 cursor-default":"bg-transparent"}[r];return Object(g.jsx)("button",{className:"".concat(c," ").concat(i," font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center"),onClick:t,type:a,disabled:s,children:n})};D.defaultProps={className:"",variant:"primary",type:"button"};var U=D,P=function(){var e=Object(E.a)().t,t=y(),r=t.user,n=t.removeUser;return Object(g.jsxs)(g.Fragment,{children:[!r&&Object(g.jsx)(i.b,{to:Ce.LOGIN,children:e("Login")}),!!r&&Object(g.jsx)(U,{variant:"hidden",onClick:n,children:e("Logout")})]})},A=function(){var e=Object(E.a)().t,t=y().user;return Object(g.jsx)("nav",{className:"py-2 px-4",children:Object(g.jsxs)("ul",{className:"flex items-center",children:[Object(g.jsx)("li",{className:"uppercase font-bold",children:Object(g.jsx)(i.b,{to:"/",children:e("Developer Life")})}),Ge.map((function(r){var n=qe[r];if(n.permissionTest&&!n.permissionTest(t))return null;var a=n.title;return Object(g.jsx)("li",{className:"ml-4",children:Object(g.jsx)(i.b,{to:r,children:e(a)})},"nav__".concat(r))})),Object(g.jsx)("li",{className:"ml-auto",children:Object(g.jsx)(P,{})})]})})};function M(e,t){for(var r=0,n=Object.entries(t);r<n.length;r++){var a=Object(l.a)(n[r],2),s=a[0],c=a[1],i=new RegExp(":".concat(s),"g");e=e.replace(i,String(c))}return e}var F=m.a.create({baseURL:"/"});F.interceptors.request.use((function(e){var t=v();return t&&(e.headers=Object(o.a)(Object(o.a)({},e.headers),{},{Authorization:"Token ".concat(t.token)})),e}));var W=function(){var e=Object(E.a)().t,t=Object(u.i)(),r=t.offering,a=t.slug,s=Object(n.useState)([]),c=Object(l.a)(s,2),o=c[0],d=c[1],j=Object(n.useMemo)((function(){return o.filter((function(e){return"string"===typeof e.long_answer})).map((function(e){return{timestamp:e.submission_date,summary:e.summary,long:e.long_answer}}))}),[o]),b=Object(n.useMemo)((function(){return o.filter((function(e){return!("string"===typeof e.summary)})).map((function(e){return e.summary}))}),[o]);Object(n.useEffect)((function(){var e=!0;return F.get(M("/api/offerings/:offering/exercises/:slug/answers/",{offering:r,slug:a})).then((function(t){e&&d(t.data||[])})),function(){e=!1}}),[]);var f=Object(n.useMemo)((function(){var e;return(null===(e=b[0])||void 0===e?void 0:e.num_choices)||0}),[b]),m=Object(n.useMemo)((function(){var e=Object(k.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ");e.length=f;var t=b.map((function(t){return e[(null===t||void 0===t?void 0:t.choice)||0]})),r={};return e.forEach((function(e){r[e]=t.filter((function(t){return t===e})).length})),[e,Object.values(r)]}),[b,f]),p=Object(l.a)(m,2),O=p[0],h=p[1];return Object(g.jsxs)(R,{children:[Object(g.jsx)(A,{}),Object(g.jsx)(i.b,{to:Ce.INSTRUCTOR_HOME,className:"bg-gray-100 text-blue-500 px-4 py-2",children:Object(g.jsx)("b",{children:e("Go back")})}),Object(g.jsxs)("div",{className:"my-4 p-4 fit-content",children:[Object(g.jsxs)("p",{className:"mr-4",children:[Object(g.jsxs)("b",{children:[e("Offering"),":"]})," ",r]}),Object(g.jsxs)("p",{className:"mr-4",children:[Object(g.jsxs)("b",{children:[e("Exercise slug"),":"]})," ",a]}),Object(g.jsxs)("p",{children:[Object(g.jsxs)("b",{children:[e("Multiple choices answers"),":"]})," ",b.length]}),Object(g.jsxs)("p",{children:[Object(g.jsxs)("b",{children:[e("Text answers"),":"]})," ",j.length]})]}),!!b.length&&Object(g.jsx)(L,{options:O,numSelectedOptions:h}),!!j.length&&Object(g.jsx)(_,{data:j.map((function(t){var r;return r={},Object(S.a)(r,e("Submission time"),new Date(t.timestamp).toLocaleString()),Object(S.a)(r,e("Summary"),t.summary),Object(S.a)(r,e("Long answer"),Object(g.jsx)(U,{variant:"primary",onClick:function(){console.log(t.long)},children:"click me"})),r}))})]})},q=function(){var e=y().user,t=Object(u.h)();return e&&!e.isStaff?Object(g.jsx)(u.a,{to:{pathname:Ce.LOGIN,search:"?next=".concat(t.pathname,"&reason=not-admin")}}):null},G=function(e){var t=e.variant,r=e.children,n=e.className,a=5===t?"h5":2===t?"h2":"h1",s=5===t?"":2===t?"text-2xl":"text-4xl",c=!n||n.indexOf("mt-")<0&&n.indexOf("my-")<0?"mt-4":"";return Object(g.jsx)(a,{className:"".concat(n||""," uppercase font-bold ").concat(s," leading-none tracking-wide ").concat(c),children:r})};G.defaultProps={variant:1};var H=G,J=function(e,t,r,a){var s=Object(n.useState)(t),c=Object(l.a)(s,2),i=c[0],o=c[1],u=Object(n.useState)(),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(n.useState)(!0),p=Object(l.a)(f,2),O=p[0],h=p[1],x=Object(n.useState)(!1),v=Object(l.a)(x,2),g=v[0],w=v[1],y=Object(n.useCallback)((function(){w(!0)}),[w]);return Object(n.useEffect)((function(){var t=!0;return a&&!g||(g&&w(!1),function(){var n={};r&&(n.headers={Authorization:"Token ".concat(r)}),h(!0),b(void 0),m.a.get(e,n).then((function(e){return e.data})).then((function(e){return t&&o(e)})).catch((function(e){return t&&b(e)})).finally((function(){return t&&h(!1)}))}()),function(){t=!1}}),[e,r,a,g]),{data:i,error:j,loading:O,refresh:y}},V=function(e,t){var r=J(M("/api/offerings/:offering/exercises/",{offering:String(e)}),[],t);return{exerciseList:r.data,error:r.error,loading:r.loading,refresh:r.refresh}},z=function(e){var t=e.offering,r=e.slug,a=y().user,s=function(e,t,r,n){var a=n?"?user=".concat(n):"",s=J("".concat(M("/api/offerings/:offering/summaries/:exerciseSlug/",{offering:e,exerciseSlug:t})).concat(a),[],r);return{summaryList:s.data,error:s.error,loading:s.loading,refresh:s.refresh}}(t,r,(null===a||void 0===a?void 0:a.token)||""),c=s.summaryList,o=s.loading,u=s.refresh,d=Object(E.a)().t,j=Object(n.useState)(0),b=Object(l.a)(j,2),f=b[0],m=b[1],p=Object(n.useState)(0),O=Object(l.a)(p,2),h=O[0],x=O[1],v=Object(n.useState)(),w=Object(l.a)(v,2),N=w[0],S=w[1];Object(n.useEffect)((function(){o||(x(c.length),m(c.map((function(e){return e.answer_count})).reduce((function(e,t){return e+t}),0)),S(new Date))}),[o,c]);var k=M(Ce.EXERCISE_ANSWERS,{offering:t,slug:r});return Object(g.jsxs)("div",{className:"bg-gray-100 p-4 flex flex-col",children:[Object(g.jsxs)("div",{className:"flex-grow",children:[Object(g.jsxs)("p",{children:[" ",r," "]}),!!N&&Object(g.jsx)("p",{children:d("submissions sent before",{total:f,users:h,lastUpdate:null===N||void 0===N?void 0:N.toLocaleString()})})]}),Object(g.jsxs)("div",{className:"flex flex-row mt-4 justify-around",children:[Object(g.jsx)(i.b,{to:k,children:Object(g.jsx)(U,{children:d("See details")})}),Object(g.jsx)(U,{onClick:u,children:d("Reload")})]})]})},X=function(){var e=Object(E.a)().t,t=y().user,r=(null===t||void 0===t?void 0:t.token)||"",n=V(1,r).exerciseList;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(q,{}),Object(g.jsx)(A,{}),Object(g.jsxs)(R,{children:[Object(g.jsx)(H,{children:e("Instructor Dashboard")}),Object(g.jsx)("div",{className:"grid gap-1 grid-cols-3 mt-4",children:n.map((function(e){return Object(g.jsx)(z,{offering:1,slug:e.slug},"exercise-".concat(e.slug))}))})]})]})},B=function(){return new URLSearchParams(Object(u.h)().search)},Y=r(32),K=r(26),Q=r(64),Z=function(e){var t=e.htmlFor,r=e.children;return Object(g.jsx)("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-1",children:r})},$=function(e){var t=e.children;return Object(g.jsx)("p",{className:"text-red-500 text-xs italic",children:t})},ee=["error","label","placeholder","inputId","name","type"],te=Object(n.forwardRef)((function(e,t){var r=e.error,n=e.label,a=e.placeholder,s=e.inputId,c=e.name,i=e.type,l=Object(Y.a)(e,ee);return Object(g.jsxs)("div",{className:"mb-4",children:[n&&Object(g.jsx)(Z,{htmlFor:s,children:n}),Object(g.jsx)("input",Object(o.a)({className:"appearance-none border ".concat(r?"border-red-500":"border-gray-300"," rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),id:s,type:i,name:c,ref:t,placeholder:a||""},l)),r&&Object(g.jsx)($,{children:r})]})}));te.defaultProps={type:"text"};var re=te,ne=function(e){return Object(g.jsx)("form",Object(o.a)({},e))};ne.Label=Z,ne.TextInput=re;var ae=ne,se=r(33),ce=se.a().shape({username:se.b().required(),password:se.b().required()}),ie=r(288),oe=r(42),le=r.n(oe),ue={initial:{transition:{staggerChildren:.2}},animate:{transition:{staggerChildren:.2}}},de={initial:{y:"0%"},animate:{y:"100%"}},je={duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},be=function(e){var t=e.light,r=e.className,n="".concat(le.a.loadingDot," ").concat(t?le.a.light:le.a.dark);return Object(g.jsx)("div",{className:"".concat(r||""," ").concat(le.a.animationContainer),children:Object(g.jsxs)(ie.a.div,{className:le.a.dotContainer,variants:ue,initial:"initial",animate:"animate",children:[Object(g.jsx)(ie.a.span,{className:n,variants:de,transition:je}),Object(g.jsx)(ie.a.span,{className:n,variants:de,transition:je}),Object(g.jsx)(ie.a.span,{className:n,variants:de,transition:je})]})})},fe=r(128),me=r.n(fe),pe=function(e){var t=e.children;return Object(g.jsx)("div",{className:"uppercase ".concat(me.a.separator),children:Object(g.jsx)("span",{children:t||""})})},Oe=["onChange"],he=["onChange"],xe=function(){var e,t,r=Object(n.useRef)(!0);Object(n.useEffect)((function(){return function(){r.current=!1}}),[]);var a=B().get("reason"),s=Object(n.useState)(!1),c=Object(l.a)(s,2),i=c[0],u=c[1],d=Object(n.useState)(!1),j=Object(l.a)(d,2),b=j[0],f=j[1],m=Object(E.a)().t,O=y().putUser,h=Object(K.d)({resolver:Object(Q.a)(ce)}),x=h.register,v=h.handleSubmit,w=h.formState.errors,N=x("username"),S=N.onChange,k=Object(Y.a)(N,Oe),R=x("password"),C=R.onChange,_=Object(Y.a)(R,he);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(ae,{onSubmit:v((function(e){f(!0),p(e.username,e.password).then((function(e){r.current&&(e?O(e):u(!0))})).finally((function(){return r.current&&f(!1)}))})),children:[Object(g.jsx)(ae.TextInput,Object(o.a)(Object(o.a)({label:m("Username"),inputId:"username",placeholder:m("Type username")},k),{},{onChange:function(e){u(!1),S(e)},error:m((null===w||void 0===w||null===(e=w.username)||void 0===e?void 0:e.message)||"")})),Object(g.jsx)(ae.TextInput,Object(o.a)(Object(o.a)({label:m("Password"),inputId:"password",type:"password",placeholder:m("Password")},_),{},{onChange:function(e){u(!1),C(e)},error:m((null===w||void 0===w||null===(t=w.password)||void 0===t?void 0:t.message)||"")})),i&&Object(g.jsx)($,{children:m("Invalid credentials")}),!!a&&Object(g.jsx)($,{children:m(a||"")}),Object(g.jsx)(U,{variant:"secondary",className:"mt-2 w-full",type:"submit",disabled:b,children:m("Sign in")}),b&&Object(g.jsx)("div",{className:"w-full flex justify-center",children:Object(g.jsx)(be,{className:"text-xs"})})]}),Object(g.jsx)(pe,{children:m("or")}),Object(g.jsx)("p",{children:m("Ask the instructor to sign you up")})]})},ve=function(e){var t=e.children,r=Object(E.a)().t;return Object(g.jsxs)("div",{className:"w-full min-h-screen px-2 flex flex-col lg:flex-row justify-center lg:justify-around items-center bg-gray-100",children:[Object(g.jsxs)("div",{className:"hidden md:block mb-8 lg:pr-24",children:[Object(g.jsx)("h1",{className:"text-8xl text-primary mb-4",children:"Developer Life"}),Object(g.jsx)("img",{src:"/static/static/img/insper.png",className:"h-16",alt:"Insper Logo"})]}),Object(g.jsxs)("div",{className:"max-w-xs rounded shadow",children:[Object(g.jsx)("h2",{className:"text-3xl uppercase px-6 py-4 bg-primary text-white rounded-t text-center md:hidden",children:r("Developer Life")}),Object(g.jsx)("div",{className:"bg-white px-4 py-4 md:px-6 md:py-6 rounded",children:t})]})]})},ge=function(){var e=y(),t=e.user,r=e.removeUser,a=Object(u.g)(),s=B(),c=s.get("redirectTo"),i=Object(n.useMemo)((function(){return c&&decodeURIComponent(c)}),[c]);return Object(n.useEffect)((function(){if(t)if(s.get("reason"))r();else if(i){var e=i;e+="".concat(e.indexOf("?")>=0?"&":"?","token=").concat(t.token),window.location.href=e}else a.replace(s.get("next")||"/")}),[a,s,t,r,i]),Object(g.jsx)(ve,{children:Object(g.jsx)(xe,{})})},we=se.a().shape({password:se.b().required(),passwordConfirmation:se.b().test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}),ye=["onChange"],Ne=["onChange"],Se=function(e){var t,r,a=e.firstTime,s=e.uid,c=e.token,i=e.reason,d=Object(u.g)(),j=Object(n.useRef)(!0);Object(n.useEffect)((function(){return function(){j.current=!1}}),[]);var b=Object(n.useState)(!1),f=Object(l.a)(b,2),m=f[0],p=f[1],h=Object(E.a)().t,x=Object(K.d)({resolver:Object(Q.a)(we)}),v=x.register,w=x.handleSubmit,y=x.formState.errors,N=Object(n.useState)(!1),S=Object(l.a)(N,2),k=S[0],R=S[1],C=v("password"),_=C.onChange,I=Object(Y.a)(C,ye),T=v("passwordConfirmation"),L=T.onChange,D=Object(Y.a)(T,Ne);return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(ae,{onSubmit:w((function(e){p(!0),O(s||"",c||"",e.password,e.passwordConfirmation).then((function(e){e?d.push("/"):R(!0)})).finally((function(){return j.current&&p(!1)}))})),children:[Object(g.jsx)(ae.TextInput,Object(o.a)(Object(o.a)({label:h("Password"),inputId:"password",type:"password",placeholder:h("Password")},I),{},{onChange:_,error:h((null===y||void 0===y||null===(t=y.password)||void 0===t?void 0:t.message)||"")})),Object(g.jsx)(ae.TextInput,Object(o.a)(Object(o.a)({label:h("Repeat password"),inputId:"passwordConfirmation",type:"password",placeholder:h("Password")},D),{},{onChange:L,error:h((null===y||void 0===y||null===(r=y.passwordConfirmation)||void 0===r?void 0:r.message)||"")})),!!i&&Object(g.jsx)($,{children:h(i||"")}),k&&Object(g.jsx)($,{children:h("Invalid password reset link")}),Object(g.jsx)(U,{variant:"secondary",className:"mt-2 w-full",type:"submit",disabled:m,children:h(a?"Set password":"Reset password")}),m&&Object(g.jsx)("div",{className:"w-full flex justify-center",children:Object(g.jsx)(be,{className:"text-xs"})})]})})},ke=function(){var e,t=B(),r=t.get("first"),n=Object(u.h)(),a=null===(e=Object(u.f)(n.pathname,qe[Ce.PASSWORD_RESET].props))||void 0===e?void 0:e.params;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(ve,{children:Object(g.jsx)(Se,{firstTime:!!r,uid:null===a||void 0===a?void 0:a.uid,token:null===a||void 0===a?void 0:a.token,reason:t.get("reason")})})})},Ee=function(e){var t=e.children,r=e.className;return Object(g.jsx)("h2",{className:"".concat(r||""," text-2xl text-primary leading-none mt-1"),children:t})},Re=function(e){var t=e.className,r=e.progress,n=180*Math.PI;r<0&&(r=0),r>1&&(r=1);var a=110*Math.sqrt(2),s={start:{strokeDashoffset:n},progress:{strokeDashoffset:n*(1-r),transition:{duration:.5}}},c={start:{strokeDashoffset:a},progress:{strokeDashoffset:0,transition:{duration:.5,delay:.2}}};return Object(g.jsxs)("svg",{className:t||"",id:"svg",width:"200",height:"200",viewBox:"0 0 200 200",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(g.jsx)("circle",{r:"90",cx:"100",cy:"100",fill:"transparent",stroke:"#cad8ca",strokeWidth:"20"}),Object(g.jsx)(ie.a.circle,{r:"90",cx:"100",cy:"100",fill:"transparent",stroke:"#27A5A2",transform:"rotate(-90 100 100)",strokeWidth:"20",strokeDasharray:"".concat(n),strokeDashoffset:"".concat(n*(1-r)),variants:s,initial:"start",animate:"progress"}),1===r&&Object(g.jsx)(ie.a.path,{d:"M45 95L85 135L155 65",fill:"transparent",stroke:"#27A5A2",strokeWidth:"20",strokeDasharray:"".concat(a),strokeDashoffset:"0",variants:c,initial:"start",animate:"progress"})]})};Re.defaultProps={progress:1};var Ce,_e=Re,Ie=function(e){var t=e.options,r=e.onSelect,n=e.title,a=e.completionRates,s=e.selectedRow;return Object(g.jsxs)("div",{className:"border border-gray-200 py-2 overflow-hidden",children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:n}),Object(g.jsx)("ul",{className:"mt-4",children:t.map((function(e,n){return Object(g.jsxs)("li",{onClick:function(){return function(e){r&&r(t[e],e)}(n)},className:"flex items-center cursor-pointer px-4 py-1 ".concat(n===s?"bg-primary-50":""),children:[Object(g.jsx)("div",{className:"min-w-min mr-2",children:Object(g.jsx)(_e,{className:"w-6 h-6",progress:a[e]})}),e]},"option-".concat(e,"-").concat(n))}))})]})},Te=function(e){var t,r,n=e.offering,a=e.summaryMap,s=e.exercise,c=Object(E.a)().t,i=y().user,o=a[null===s||void 0===s?void 0:s.pk],l=function(e,t,r,n){var a=J(M("/api/offerings/:offering/exercises/:exerciseSlug/answers/:answerId/",{offering:e,exerciseSlug:r,answerId:n}),null,t,!(r&&t&&void 0!==n&&void 0!==e));return{answer:a.data,error:a.error,loading:a.loading,refresh:a.refresh}}(n,(null===i||void 0===i?void 0:i.token)||"",null===s||void 0===s?void 0:s.slug,null===o||void 0===o?void 0:o.latest).answer;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:(null===s||void 0===s?void 0:s.slug)||""}),Object(g.jsxs)("div",{className:"px-4 mt-4",children:[Object(g.jsx)(U,{className:"uppercase tracking-wide",children:"Ver Exerc\xedcio"}),Object(g.jsxs)("section",{className:"mt-6",children:[Object(g.jsx)(H,{variant:5,children:c("Results")}),Object(g.jsxs)("div",{className:"flex flex-wrap mt-2",children:[Object(g.jsxs)("span",{className:"mr-8",children:[c("Max points"),":"," ",Object(g.jsxs)("strong",{className:"font-bold text-primary-500",children:[Math.round(1e4*((null===o||void 0===o?void 0:o.max_points)||0))/100,"%"]})]}),Object(g.jsxs)("span",{className:"mr-8",children:[c("Attempts"),":"," ",Object(g.jsx)("strong",{className:"font-bold",children:(null===o||void 0===o?void 0:o.answer_count)||0})]})]})]}),"CODE"===s.type&&Object(g.jsxs)("section",{className:"mt-6",children:[Object(g.jsx)("h6",{className:"font-bold",children:c("Last attempt")}),Object(g.jsx)("div",{className:"flex flex-wrap mt-2",children:Object(g.jsxs)("span",{className:"mr-8",children:[c("Tests passing"),":"," ",Object(g.jsx)("strong",{className:"font-bold",children:l&&l.summary?null===(t=l.summary)||void 0===t?void 0:t.passed:"0"})]})}),(null===l||void 0===l||null===(r=l.long_answer)||void 0===r?void 0:r.code)&&Object(g.jsxs)("div",{className:"mt-4",children:[Object(g.jsxs)("strong",{className:"font-bold",children:[c("Your solution"),":"]}),Object(g.jsx)("pre",{className:"mt-2 bg-black text-white py-4 px-4",children:l.long_answer.code})]})]})]})]})},Le=function(e){var t=e.group,r=e.completionRates,n=Object.keys(t)[0];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:n}),Object(g.jsx)("div",{className:"px-4 mt-4",children:Object(g.jsx)(_e,{progress:r[n]||0})})]})},De=function(e){var t=e.topic,r=e.completionRates,n=Object.keys(t)[0];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:n}),Object(g.jsx)("div",{className:"px-4 mt-4",children:Object(g.jsx)(_e,{progress:r[n]||0})})]})},Ue=function(e,t,r,n){var a,s;if(!e)return null;if(e.slug)return Object(g.jsx)(Te,{offering:t,summaryMap:r,exercise:e});var c=Object.keys(e);if(c&&(null===(a=e[c[0]])||void 0===a?void 0:a.length))return Object(g.jsx)(Le,{group:e,completionRates:n});var i=Object.keys(e[c[0]]);return c&&i&&(null===(s=e[c[0]][i[0]])||void 0===s?void 0:s.length)?Object(g.jsx)(De,{topic:e,completionRates:n}):null},Pe=function(e){var t=e.data,r=e.offering,n=e.summaryMap,a=e.completionRates;return Object(g.jsx)(g.Fragment,{children:Ue(t,r,n,a)})},Ae=function(e,t){return Object.fromEntries(e.map((function(e){var r=t[e.pk];return[e.slug,r?r.max_points:0]})))},Me=function(e,t){return Object.fromEntries(Object.keys(e).map((function(r){var n=Object.values(Ae(e[r],t));return[r,n.reduce((function(e,t){return e+t}),0)/n.length]})))},Fe=function(e){var t=e.exerciseGroups,r=e.summaryMap,a=e.className,s=Object(E.a)().t,c=Object(n.useState)(""),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(n.useState)(""),j=Object(l.a)(d,2),b=j[0],f=j[1],m=Object(n.useState)({}),p=Object(l.a)(m,2),O=p[0],h=p[1];Object(n.useEffect)((function(){h(function(e,t){return Object.assign.apply(Object,[{}].concat(Object(k.a)(Object.keys(e).map((function(r){var n=e[r],a=Object.keys(n).map((function(e){return n[e]})).reduce((function(e,t){return e||t?e?t?e.concat(t):e:t:[]}),[]);return Me(Object(S.a)({},r,a),t)})))))}(t,r))}),[t,r]);var x=Object(n.useState)({}),v=Object(l.a)(x,2),w=v[0],y=v[1],N=Object(n.useState)({}),R=Object(l.a)(N,2),C=R[0],_=R[1];Object(n.useEffect)((function(){var e=o?t[o]:{};y(e),e&&_(Me(e,r))}),[o,t,r]);var I=Object(n.useState)([]),T=Object(l.a)(I,2),L=T[0],D=T[1],U=Object(n.useState)({}),P=Object(l.a)(U,2),A=P[0],M=P[1];Object(n.useEffect)((function(){var e=w[b];D(Object.keys(w)&&b?e.map((function(e){return e.slug})):[]),e&&M(Ae(e,r))}),[w,b,r]);var F=Object(n.useState)(-1),W=Object(l.a)(F,2),q=W[0],G=W[1],H=Object(n.useState)(-1),J=Object(l.a)(H,2),V=J[0],z=J[1],X=Object(n.useState)(-1),B=Object(l.a)(X,2),Y=B[0],K=B[1],Q=Object(n.useState)(0),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(null),re=Object(l.a)(te,2),ne=re[0],ae=re[1];return Object(g.jsxs)("div",{className:"grid grid-cols-6 shadow-sm ".concat(a||""),children:[Object(g.jsx)(Ie,{title:s("Topic"),options:Object.keys(t),onSelect:function(e,r){u(e),ae(Object(S.a)({},e,t[e])),f(""),G(r),z(-1),K(-1),ee(0)},completionRates:O,selectedRow:q}),Object(g.jsx)(Ie,{title:s("Content"),options:Object.keys(w),onSelect:function(e,t){f(e),ae(Object(S.a)({},e,w[e])),z(t),K(-1),ee(1)},completionRates:C,selectedRow:V}),Object(g.jsx)(Ie,{title:s("Exercises"),options:L,onSelect:function(e,t){var r=w[b][t];ae(r),K(t),ee(2)},completionRates:A,selectedRow:Y}),Object(g.jsx)("div",{className:"col-start-4 col-end-7 border border-gray-200 py-2",children:Object(g.jsx)(Pe,{offering:1,data:ne,summaryMap:r,completionRates:[O,C,A][$]})})]})},We=function(){var e=Object(E.a)().t,t=y().user,r=Object(n.useState)({}),a=Object(l.a)(r,2),s=a[0],c=a[1],i=(null===t||void 0===t?void 0:t.token)||"",o=V(1,i).exerciseList;Object(n.useEffect)((function(){c(function(e){var t={};return e.forEach((function(e){var r=e.topic,n=e.group;t[r]||(t[r]={}),t[r][n]||(t[r][n]=[]),t[r][n].push(e)})),t}(o))}),[o]);var u=function(e,t,r){var n=r?"?user=".concat(r):"",a=J("".concat(M("/api/offerings/:offering/summaries/",{offering:e})).concat(n),[],t);return{summaryList:a.data,error:a.error,loading:a.loading,refresh:a.refresh}}(1,i,null===t||void 0===t?void 0:t.pk),d=u.summaryList,j=u.loading,b=Object(n.useState)({}),f=Object(l.a)(b,2),m=f[0],p=f[1];return Object(n.useEffect)((function(){j||p(function(e){return Object.fromEntries(e.map((function(e){return[e.exercise,e]})))}(d))}),[d,j]),t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(A,{}),Object(g.jsxs)(R,{children:[Object(g.jsx)(H,{children:e("Dashboard")}),Object(g.jsx)(Ee,{children:"".concat(t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName)}),Object(g.jsxs)("section",{className:"my-8",children:[Object(g.jsx)(H,{variant:2,children:e("Exercises")}),Object(g.jsx)(Fe,{exerciseGroups:s,summaryMap:m,className:"mt-4"})]})]})]}):null};!function(e){e.STUDENT_HOME="/",e.INSTRUCTOR_HOME="/instructor",e.EXERCISE_ANSWERS="/instructor/answers/:offering/:slug/",e.LOGIN="/login",e.PASSWORD_RESET="/password-reset/:uid/:token/"}(Ce||(Ce={}));var qe={};qe[Ce.STUDENT_HOME]={title:"Student Dashboard",props:{path:Ce.STUDENT_HOME,exact:!0,component:We}},qe[Ce.INSTRUCTOR_HOME]={title:"Instructor Dashboard",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:Ce.INSTRUCTOR_HOME,exact:!0,component:X}},qe[Ce.EXERCISE_ANSWERS]={title:"Exercise Answers",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:Ce.EXERCISE_ANSWERS,exact:!0,component:W}},qe[Ce.LOGIN]={title:"Login",props:{path:Ce.LOGIN,exact:!0,component:ge}},qe[Ce.PASSWORD_RESET]={title:"Password reset",props:{path:Ce.PASSWORD_RESET,exact:!0,component:ke}};var Ge=[Ce.INSTRUCTOR_HOME],He=function(){var e=y().user,t=Object(u.h)();return e||Object(u.f)(t.pathname,qe[Ce.LOGIN].props)||Object(u.f)(t.pathname,qe[Ce.PASSWORD_RESET].props)?null:Object(g.jsx)(u.a,{to:{pathname:Ce.LOGIN,search:"?next=".concat(t.pathname)}})},Je=function(e){var t=e.children;return Object(g.jsx)(N,{children:t})},Ve=r(83),ze=r(49),Xe=r(130),Be=r(131);Ve.a.use(ze.e).init({resources:{en:{translation:Xe},pt:{translation:Be}},lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1}});Ve.a;var Ye=function(){return Object(g.jsx)(Je,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(He,{}),Object(g.jsx)("div",{children:Object(g.jsx)(u.d,{children:Object.entries(qe).map((function(e,t){var r=Object(l.a)(e,2),n=(r[0],r[1].props);return Object(g.jsx)(u.b,Object(o.a)({},n),"route__".concat(t))}))})})]})})},Ke=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,290)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(i.a,{children:Object(g.jsx)(Ye,{})})}),document.getElementById("root")),Ke()},42:function(e,t,r){e.exports={animationContainer:"LoadingIndicator_animationContainer__31NJQ",loadingDot:"LoadingIndicator_loadingDot__9elUF",dark:"LoadingIndicator_dark__VNh81",light:"LoadingIndicator_light__1lhVC",dotContainer:"LoadingIndicator_dotContainer__3C8Kq"}}},[[286,1,2]]]);
//# sourceMappingURL=main.80bea709.chunk.js.map